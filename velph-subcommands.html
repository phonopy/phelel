
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>velph subcommands &#8212; Phelel v.0.8.3</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=c1d87ce5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'velph-subcommands';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="velph example" href="velph-example.html" />
    <link rel="prev" title="velph init template" href="velph-init-template.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">Phelel v.0.8.3</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow of el-ph calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="phelel-command.html"><code class="docutils literal notranslate"><span class="pre">phelel</span></code> command</a></li>
<li class="toctree-l1"><a class="reference internal" href="velph-command.html"><code class="docutils literal notranslate"><span class="pre">velph</span></code> command</a></li>
<li class="toctree-l1"><a class="reference internal" href="velph-toml.html"><code class="docutils literal notranslate"><span class="pre">velph.toml</span></code> file</a></li>
<li class="toctree-l1"><a class="reference internal" href="velph-init.html"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">init</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="velph-init-template.html"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">init</span></code> template</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">velph</span></code> subcommands</a></li>
<li class="toctree-l1"><a class="reference internal" href="velph-example.html"><code class="docutils literal notranslate"><span class="pre">velph</span></code> example</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/velph-subcommands.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>velph subcommands</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-relax"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">relax</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-relax-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">relax</span> <span class="pre">generate</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-nac"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">nac</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-nac-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">nac</span> <span class="pre">generate</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-el-bands"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">el_bands</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-el-bands-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">el_bands</span> <span class="pre">generate</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-el-bands-plot"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">el_bands</span> <span class="pre">plot</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phelel"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phelel-init"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">init</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phelel-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">generate</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phelel-differentiate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">differentiate</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phelel-phonopy"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">phonopy</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">generate</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport-plot"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport-plot-transport"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span> <span class="pre">transport</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport-plot-eigenvalues"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span> <span class="pre">eigenvalues</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport-plot-selfenergy"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span> <span class="pre">selfenergy</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-ph-bands"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">ph_bands</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-ph-bands-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">ph_bands</span> <span class="pre">generate</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-ph-bands-plot"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">ph_bands</span> <span class="pre">plot</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phono3py"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phono3py</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phono3py-init"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phono3py</span> <span class="pre">init</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phono3py-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phono3py</span> <span class="pre">generate</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phonopy"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phonopy</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phonopy-init"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phonopy</span> <span class="pre">init</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phonopy-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phonopy</span> <span class="pre">generate</span></code></a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="velph-subcommands">
<span id="id1"></span><h1><code class="docutils literal notranslate"><span class="pre">velph</span></code> subcommands<a class="headerlink" href="#velph-subcommands" title="Link to this heading">#</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">velph</span></code> subcommands, except for <a class="reference internal" href="velph-init.html#velph-init"><span class="std std-ref">velph init</span></a> and <a class="reference internal" href="velph-command.html#velph-hints"><span class="std std-ref">velph hints</span></a>,
are explained on this page.</p>
<p>The following subcommands must be executed in the directory containing the
<code class="docutils literal notranslate"><span class="pre">velph.toml</span></code> file. This ensures that the directories and files generated are
properly organized relative to the current directory where <code class="docutils literal notranslate"><span class="pre">velph.toml</span></code> is
located.</p>
<section id="velph-relax">
<h2><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">relax</span></code><a class="headerlink" href="#velph-relax" title="Link to this heading">#</a></h2>
<p>It is recommended to create a project directory secific for relaxation
calculation, e.g., as</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>ls
POSCAR-unitcell<span class="w">  </span>POTCAR<span class="w">  </span>velph-tmpl.toml
%<span class="w"> </span>velph<span class="w"> </span>init<span class="w"> </span>--template-toml<span class="w"> </span>velph-tmpl.toml<span class="w"> </span>POSCAR-unitcell<span class="w"> </span>relax
...
%<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>relax
%<span class="w"> </span>ls
POTCAR<span class="w">  </span>velph.toml
%<span class="w"> </span>velph<span class="w"> </span>relax<span class="w"> </span>generate
...
</pre></div>
</div>
<section id="velph-relax-generate">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">relax</span> <span class="pre">generate</span></code><a class="headerlink" href="#velph-relax-generate" title="Link to this heading">#</a></h3>
<p>This subcommand generates VASP input files and a job script for crystal
structure relaxation. Initially, these files are created in the <code class="docutils literal notranslate"><span class="pre">iter1</span></code>
directory. The process supports multiple relaxation steps, where the <code class="docutils literal notranslate"><span class="pre">CONTCAR</span></code>
file from the previous iteration is used as the <code class="docutils literal notranslate"><span class="pre">POSCAR</span></code> for the next step once
the preceding VASP calculation is complete. Each subsequent set of input files
is generated in directories named <code class="docutils literal notranslate"><span class="pre">iter2</span></code>, <code class="docutils literal notranslate"><span class="pre">iter3</span></code>, and so on.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>ls
POTCAR<span class="w">  </span>velph.toml
%<span class="w"> </span>velph<span class="w"> </span>relax<span class="w"> </span>generate
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>made<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;relax/iter1&quot;</span>.
...
<span class="c1"># Run VASP calculation in relax/iter1</span>
...
%<span class="w"> </span>ls
POTCAR<span class="w">  </span>relax/<span class="w">  </span>velph.toml
%<span class="w"> </span>velph<span class="w"> </span>relax<span class="w"> </span>generate
<span class="s2">&quot;relax/iter1&quot;</span><span class="w"> </span>exists.
<span class="s2">&quot;relax/iter1/CONTCAR&quot;</span><span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>as<span class="w"> </span>new<span class="w"> </span><span class="s2">&quot;POSCAR&quot;</span>.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>made<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;relax/iter2&quot;</span>.
...
</pre></div>
</div>
</section>
</section>
<section id="velph-nac">
<span id="velph-nac-subcommand"></span><h2><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">nac</span></code><a class="headerlink" href="#velph-nac" title="Link to this heading">#</a></h2>
<p>This subcommand is used to prepare VASP input files for calculating the
dielectric constant and Born effective charges. These quantities are required
for the non-analytical term correction in phonon calculations and for handling
the long-range terms in electron-phonon interaction calculations.</p>
<section id="velph-nac-generate">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">nac</span> <span class="pre">generate</span></code><a class="headerlink" href="#velph-nac-generate" title="Link to this heading">#</a></h3>
<p>After the VASP calculation is complete, the dielectric constant and Born
effective charges are extracted from the <code class="docutils literal notranslate"><span class="pre">vasprun.xml</span></code> file during the execution
of <code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">init</span></code>, <code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phono3py</span> <span class="pre">init</span></code>, or <code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phonopy</span> <span class="pre">init</span></code>. The
extracted values are then written to <code class="docutils literal notranslate"><span class="pre">phelel_disp.yaml</span></code>, <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code>,
or <code class="docutils literal notranslate"><span class="pre">phonopy_disp.yaml</span></code>, respectively.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>nac<span class="w"> </span>generate
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>made<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;nac&quot;</span>.
</pre></div>
</div>
</section>
</section>
<section id="velph-el-bands">
<h2><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">el_bands</span></code><a class="headerlink" href="#velph-el-bands" title="Link to this heading">#</a></h2>
<p>This subcommand is used to prepare VASP input files for electronic band
structure and density of states calculations, and to plot the resulting data.</p>
<section id="velph-el-bands-generate">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">el_bands</span> <span class="pre">generate</span></code><a class="headerlink" href="#velph-el-bands-generate" title="Link to this heading">#</a></h3>
<p>The VASP input files have been prepared so that the calculation results will be
stored in <code class="docutils literal notranslate"><span class="pre">vaspout.h5</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>el_bands<span class="w"> </span>generate
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>made<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;el_bands/bands&quot;</span>.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>made<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;el_bands/dos&quot;</span>.
</pre></div>
</div>
</section>
<section id="velph-el-bands-plot">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">el_bands</span> <span class="pre">plot</span></code><a class="headerlink" href="#velph-el-bands-plot" title="Link to this heading">#</a></h3>
<p>The electronic band structure and density of states are plotted and saved in the
<code class="docutils literal notranslate"><span class="pre">el_bands.pdf</span></code> file. The energy range must be specified using the <code class="docutils literal notranslate"><span class="pre">--windows</span></code>
option, with the first and second arguments representing the range below and
above the Fermi energy in eV, respectively.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>el_bands<span class="w"> </span>plot<span class="w"> </span>--window<span class="w"> </span>-5<span class="w"> </span><span class="m">9</span>
Electronic<span class="w"> </span>band<span class="w"> </span>structure<span class="w"> </span>plot<span class="w"> </span>was<span class="w"> </span>saved<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;el_bands/el_bands.pdf&quot;</span>.
</pre></div>
</div>
</section>
</section>
<section id="velph-phelel">
<span id="velph-phelel-subcommand"></span><h2><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span></code><a class="headerlink" href="#velph-phelel" title="Link to this heading">#</a></h2>
<p>This subcommand calculates the derivatives of local potentials and PAW strengths
with respect to displacement, performing similar operations as steps 1 and 3
carried out by the <code class="docutils literal notranslate"><span class="pre">phelel</span></code> command in the <a class="reference internal" href="workflow.html#workflow-minimal"><span class="std std-ref">workflow</span></a>.</p>
<p>The subcommands below should be executed in the following order:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#velph-phelel-init-subcommand"><span class="std std-ref">velph phelel init</span></a></p></li>
<li><p><a class="reference internal" href="#velph-phelel-generate-subcommand"><span class="std std-ref">velph phelel generate</span></a></p></li>
<li><p><a class="reference internal" href="#velph-phelel-differentiate-subcommand"><span class="std std-ref">velph phelel differentiate</span></a></p></li>
<li><p><a class="reference internal" href="#velph-phelel-phonopy-subcommand"><span class="std std-ref">velph phelel phonopy</span></a> (optional)</p></li>
</ol>
<p>Certain configurations for phelel can be specified directly in the
<code class="docutils literal notranslate"><span class="pre">velph.toml</span></code> file:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[phelel]</span>
<span class="n">supercell_dimension</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span>
<span class="n">amplitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.03</span>
<span class="n">diagonal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">plusminus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
<section id="velph-phelel-init">
<span id="velph-phelel-init-subcommand"></span><h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">init</span></code><a class="headerlink" href="#velph-phelel-init" title="Link to this heading">#</a></h3>
<p>This subcommand generates the <code class="docutils literal notranslate"><span class="pre">phelel_disp.yaml</span></code> file, which contains
information about the supercell structure and displacements. It is recommended
to generate <code class="docutils literal notranslate"><span class="pre">phelel_disp.yaml</span></code> after performing the NAC calculation (see
<a class="reference internal" href="#velph-nac-subcommand"><span class="std std-ref">velph nac</span></a>). At this stage, the dielectric constant and Born
effective charges are written to <code class="docutils literal notranslate"><span class="pre">phelel_disp.yaml</span></code>, and these values are
ultimately stored in <code class="docutils literal notranslate"><span class="pre">phelel_params.hdf5</span></code> through the <code class="docutils literal notranslate"><span class="pre">phelel_disp.yaml</span></code> file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>phelel<span class="w"> </span>init
Found<span class="w"> </span><span class="s2">&quot;nac&quot;</span><span class="w"> </span>directory.<span class="w"> </span>Read<span class="w"> </span>NAC<span class="w"> </span>params.
<span class="s2">&quot;phelel/phelel_disp.yaml&quot;</span><span class="w"> </span>was<span class="w"> </span>generated.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>generated<span class="w"> </span>by<span class="w"> </span><span class="s2">&quot;velph phelel generate&quot;</span>.
</pre></div>
</div>
</section>
<section id="velph-phelel-generate">
<span id="velph-phelel-generate-subcommand"></span><h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">generate</span></code><a class="headerlink" href="#velph-phelel-generate" title="Link to this heading">#</a></h3>
<p>VASP input files and job scripts are generated.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>phelel<span class="w"> </span>generate
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>generated<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;phelel/disp-000&quot;</span>.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>generated<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;phelel/disp-001&quot;</span>.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>generated<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;phelel/disp-002&quot;</span>.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>generated<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;phelel/disp-003&quot;</span>.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>generated<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;phelel/disp-004&quot;</span>.
</pre></div>
</div>
</section>
<section id="velph-phelel-differentiate">
<span id="velph-phelel-differentiate-subcommand"></span><h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">differentiate</span></code><a class="headerlink" href="#velph-phelel-differentiate" title="Link to this heading">#</a></h3>
<p>The derivatives of local potentials and PAW strengths with respect to
displacement are calculated and stored in <code class="docutils literal notranslate"><span class="pre">phelel_params.hdf5</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>phelel<span class="w"> </span>differentiate
FFT<span class="w"> </span>mesh:<span class="w"> </span><span class="o">[</span><span class="m">30</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">30</span><span class="o">]</span>.
Running<span class="w"> </span>finufft<span class="w"> </span><span class="o">(</span><span class="nv">eps</span><span class="o">=</span><span class="m">1</span>.000e-06<span class="o">)</span>...
Running<span class="w"> </span>finufft<span class="w"> </span><span class="o">(</span><span class="nv">eps</span><span class="o">=</span><span class="m">1</span>.000e-06<span class="o">)</span>...
<span class="s2">&quot;phelel/phelel_params.hdf5&quot;</span><span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>made.
</pre></div>
</div>
</section>
<section id="velph-phelel-phonopy">
<span id="velph-phelel-phonopy-subcommand"></span><h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">phonopy</span></code><a class="headerlink" href="#velph-phelel-phonopy" title="Link to this heading">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This subcommand is similar to <code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">ph_bands</span></code>, but the phonon band structure is
calculated using the phonopy code. While the phonon calculation routines of VASP
and phonopy are expected to yield similar results, they are not entirely
equivalent. However, for electron-phonon calculations, the VASP routine is
utilized.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">phonopy_params.yaml</span></code> that contains information necessary for phonon calculation
by the phonopy code is generated from <code class="docutils literal notranslate"><span class="pre">phelel_disp.yaml</span></code> and the results of the
VASP inputs generated by <code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">generate</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>phelel<span class="w"> </span>phonopy
<span class="s2">&quot;phelel/phonopy_params.yaml&quot;</span><span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>made.
%<span class="w"> </span>phonopy-load<span class="w"> </span>phelel/phonopy_params.yaml<span class="w"> </span>--band<span class="w"> </span>auto<span class="w"> </span>-p
</pre></div>
</div>
</section>
</section>
<section id="velph-transport">
<h2><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span></code><a class="headerlink" href="#velph-transport" title="Link to this heading">#</a></h2>
<p>This subcommand is used to prepare VASP input files for calculating transport
properties based on electron-phonon interactions.</p>
<section id="velph-transport-generate">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">generate</span></code><a class="headerlink" href="#velph-transport-generate" title="Link to this heading">#</a></h3>
<p>The VASP input files are prepared for transport property calculations. Users
should review the generated <code class="docutils literal notranslate"><span class="pre">INCAR</span></code> tags and modify them as necessary for the
target material. If results from <code class="docutils literal notranslate"><span class="pre">el_bands/dos</span></code> calculations are available, the
maximum band index for the self-energy calculation is estimated and written into
the <code class="docutils literal notranslate"><span class="pre">INCAR</span></code> file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>transport<span class="w"> </span>generate
Found<span class="w"> </span><span class="s2">&quot;el_bands/dos&quot;</span><span class="w"> </span>directory.<span class="w"> </span>Estimate<span class="w"> </span>elph_selfen_band_stop.
<span class="w">  </span><span class="s2">&quot;elph_selfen_band_stop=5&quot;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>INCAR<span class="w"> </span>is<span class="w"> </span>set.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>generated<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;transport&quot;</span>.
</pre></div>
</div>
</section>
<section id="velph-transport-plot">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span></code><a class="headerlink" href="#velph-transport-plot" title="Link to this heading">#</a></h3>
<section id="velph-transport-plot-transport">
<h4><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span> <span class="pre">transport</span></code><a class="headerlink" href="#velph-transport-plot-transport" title="Link to this heading">#</a></h4>
<p>The following command opens a graphical window that contains plots of transport
properties.  By default, it uses the <code class="docutils literal notranslate"><span class="pre">transport/vaspout.h5</span></code> file unless a
different file is specified as the first argument.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>transport<span class="w"> </span>plot<span class="w"> </span>transport
</pre></div>
</div>
</section>
<section id="velph-transport-plot-eigenvalues">
<h4><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span> <span class="pre">eigenvalues</span></code><a class="headerlink" href="#velph-transport-plot-eigenvalues" title="Link to this heading">#</a></h4>
<p>The following command opens a graphical window to display eigenvalues in the
Brillouin zone with occupations that are neither zero nor one. By default, these
eigenvalues are extracted from the <code class="docutils literal notranslate"><span class="pre">transport/vaspout.h5</span></code> file unless a
different file is specified as the first argument. Their occupations are
determined based on the temperature and Fermi level set through the command-line
options.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>transport<span class="w"> </span>plot<span class="w"> </span>eigenvalues
mu:<span class="w"> </span><span class="m">4</span>.837002<span class="w"> </span>eV
temperature:<span class="w"> </span><span class="m">300</span>.000000<span class="w"> </span>K
No<span class="w"> </span>eigenvalues<span class="w"> </span>to<span class="w"> </span>plot.
%<span class="w"> </span>velph<span class="w"> </span>transport<span class="w"> </span>plot<span class="w"> </span>eigenvalues<span class="w"> </span>--mu<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
<p>This subcommand requires pre-calculated eigenvalues, Fermi levels, and input
parameters such as temperatures. However, electron-phonon calculation results
are not necessary. If the goal is to visualize Fermi surface pockets on a
k-point grid, it is recommended to run the electron-phonon calculation using
<code class="docutils literal notranslate"><span class="pre">ELPH_SCATTERING_APPROX=CRTA</span></code> to generate the required <code class="docutils literal notranslate"><span class="pre">vaspout.h5</span></code> file
efficiently.</p>
</section>
<section id="velph-transport-plot-selfenergy">
<h4><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span> <span class="pre">selfenergy</span></code><a class="headerlink" href="#velph-transport-plot-selfenergy" title="Link to this heading">#</a></h4>
<p>The following command opens a graphical window to display Fan self-energies. By
default, it uses the <code class="docutils literal notranslate"><span class="pre">transport/vaspout.h5</span></code> file unless a different file is
specified as the first argument.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>transport<span class="w"> </span>plot<span class="w"> </span>selfenergy
</pre></div>
</div>
</section>
</section>
</section>
<section id="velph-ph-bands">
<h2><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">ph_bands</span></code><a class="headerlink" href="#velph-ph-bands" title="Link to this heading">#</a></h2>
<p>This subcommand is used to prepare VASP input files for phonon band structure
calculation using the supercell force constants stored in <code class="docutils literal notranslate"><span class="pre">phelel_params.hdf5</span></code>,
and to plot the resulting data.</p>
<section id="velph-ph-bands-generate">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">ph_bands</span> <span class="pre">generate</span></code><a class="headerlink" href="#velph-ph-bands-generate" title="Link to this heading">#</a></h3>
<p>The VASP input files including <code class="docutils literal notranslate"><span class="pre">QPOINTS</span></code> are prepared so that the
calculation results will be stored in <code class="docutils literal notranslate"><span class="pre">vaspout.h5</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>ph_bands<span class="w"> </span>generate
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>made<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;ph_bands/bands&quot;</span>.
</pre></div>
</div>
</section>
<section id="velph-ph-bands-plot">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">ph_bands</span> <span class="pre">plot</span></code><a class="headerlink" href="#velph-ph-bands-plot" title="Link to this heading">#</a></h3>
<p>The phonon band structure is plotted and saved in the <code class="docutils literal notranslate"><span class="pre">ph_bands.pdf</span></code> file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>ph_bands<span class="w"> </span>plot
Phonon<span class="w"> </span>band<span class="w"> </span>structure<span class="w"> </span>plot<span class="w"> </span>was<span class="w"> </span>saved<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;ph_bands/ph_bands.pdf&quot;</span>.
</pre></div>
</div>
</section>
</section>
<section id="velph-phono3py">
<span id="velph-phono3py-subcommand"></span><h2><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phono3py</span></code><a class="headerlink" href="#velph-phono3py" title="Link to this heading">#</a></h2>
<p>This subcommand facilitates anharmonic phonon calculation including lattice
thermal conductivity calculation using the phono3py code. Certain configurations
for supercell and displacements can be specified directly in the <code class="docutils literal notranslate"><span class="pre">velph.toml</span></code>
file:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[phono3py]</span>
<span class="n">supercell_dimension</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span>
<span class="n">amplitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.03</span>
<span class="n">diagonal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">plusminus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
<section id="velph-phono3py-init">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phono3py</span> <span class="pre">init</span></code><a class="headerlink" href="#velph-phono3py-init" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">phono3py_disp.yaml</span></code> file, which contains displacement information, is
generated by this subcommand. It is recommended to use the <code class="docutils literal notranslate"><span class="pre">--rd</span></code> option with a
sufficiently large argument to create supercells with random directional
displacements. Note that it is not necessary to calculate forces for all
supercells to ultimately generate the <code class="docutils literal notranslate"><span class="pre">phono3py_params.yaml</span></code> file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>phono3py<span class="w"> </span>init<span class="w"> </span>--rd<span class="w"> </span><span class="m">2000</span>
Displacement<span class="w"> </span>distance:<span class="w"> </span><span class="m">0</span>.03
Number<span class="w"> </span>of<span class="w"> </span>displacements:<span class="w"> </span><span class="m">2000</span>
Found<span class="w"> </span><span class="s2">&quot;nac&quot;</span><span class="w"> </span>directory.<span class="w"> </span>Read<span class="w"> </span>NAC<span class="w"> </span>params.
<span class="s2">&quot;phono3py/phono3py_disp.yaml&quot;</span><span class="w"> </span>was<span class="w"> </span>generated.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>generated<span class="w"> </span>by<span class="w"> </span><span class="s2">&quot;velph phono3py generate&quot;</span>.
</pre></div>
</div>
</section>
<section id="velph-phono3py-generate">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phono3py</span> <span class="pre">generate</span></code><a class="headerlink" href="#velph-phono3py-generate" title="Link to this heading">#</a></h3>
<p>VASP input files for supercell force calculations are generated, with each
directory corresponding to a specific supercell displacement configuration. The
perfect supercell (i.e., without displacements) is labeled as <code class="docutils literal notranslate"><span class="pre">disp-00000</span></code>.</p>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>phono3py<span class="w"> </span>generate
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>generated<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;phono3py/disp-0000&quot;</span>.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>generated<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;phono3py/disp-0001&quot;</span>.
...
</pre></div>
</div>
<p>After completing supercell force calculations using the VASP code, the
<code class="docutils literal notranslate"><span class="pre">phono3py_params.yaml</span></code> file can be created with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>phono3py
%<span class="w"> </span>phono3py<span class="w"> </span>--cfz<span class="w"> </span>disp-00000/vasprun.xml<span class="w"> </span>--cf3<span class="w"> </span>disp-<span class="o">{</span><span class="m">00001</span>..00120<span class="o">}</span>/vasprun.xml<span class="w"> </span>--sp
</pre></div>
</div>
<p>In this step, forces from 120 supercells are collected, and the corresponding
data are stored in the <code class="docutils literal notranslate"><span class="pre">phono3py_params.yaml</span></code> file.</p>
</section>
</section>
<section id="velph-phonopy">
<span id="velph-phonopy-subcommand"></span><h2><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phonopy</span></code><a class="headerlink" href="#velph-phonopy" title="Link to this heading">#</a></h2>
<p>This subcommand facilitates phonon calculation using the phonopy code. Certain
configurations for supercell and displacements can be specified directly in the
<code class="docutils literal notranslate"><span class="pre">velph.toml</span></code> file:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[phonopy]</span>
<span class="n">supercell_dimension</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span>
<span class="n">amplitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.03</span>
<span class="n">diagonal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">plusminus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
<section id="velph-phonopy-init">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phonopy</span> <span class="pre">init</span></code><a class="headerlink" href="#velph-phonopy-init" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>phonopy<span class="w"> </span>init<span class="w"> </span>--rd<span class="w"> </span><span class="m">10</span>
Displacement<span class="w"> </span>distance:<span class="w"> </span><span class="m">0</span>.03
Number<span class="w"> </span>of<span class="w"> </span>displacements:<span class="w"> </span><span class="m">10</span>
Found<span class="w"> </span><span class="s2">&quot;nac&quot;</span><span class="w"> </span>directory.<span class="w"> </span>Read<span class="w"> </span>NAC<span class="w"> </span>params.
<span class="s2">&quot;phonopy/phonopy_disp.yaml&quot;</span><span class="w"> </span>was<span class="w"> </span>generated.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>generated<span class="w"> </span>by<span class="w"> </span><span class="s2">&quot;velph phonopy generate&quot;</span>.
</pre></div>
</div>
</section>
<section id="velph-phonopy-generate">
<h3><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phonopy</span> <span class="pre">generate</span></code><a class="headerlink" href="#velph-phonopy-generate" title="Link to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span>velph<span class="w"> </span>phonopy<span class="w"> </span>generate
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>generated<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;phonopy/disp-000&quot;</span>.
VASP<span class="w"> </span>input<span class="w"> </span>files<span class="w"> </span>were<span class="w"> </span>generated<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;phonopy/disp-001&quot;</span>.
...
</pre></div>
</div>
<p>After completing supercell force calculations using the VASP code, the
<code class="docutils literal notranslate"><span class="pre">phonopy_params.yaml</span></code> file can be created with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>phonopy
%<span class="w"> </span>phonopy<span class="w"> </span>--fz<span class="w"> </span>disp-<span class="o">{</span><span class="m">00000</span>..00010<span class="o">}</span>/vasprun.xml<span class="w"> </span>--sp
</pre></div>
</div>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="velph-init-template.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">init</span></code> template</p>
      </div>
    </a>
    <a class="right-next"
       href="velph-example.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><code class="docutils literal notranslate"><span class="pre">velph</span></code> example</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-relax"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">relax</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-relax-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">relax</span> <span class="pre">generate</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-nac"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">nac</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-nac-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">nac</span> <span class="pre">generate</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-el-bands"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">el_bands</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-el-bands-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">el_bands</span> <span class="pre">generate</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-el-bands-plot"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">el_bands</span> <span class="pre">plot</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phelel"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phelel-init"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">init</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phelel-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">generate</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phelel-differentiate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">differentiate</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phelel-phonopy"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phelel</span> <span class="pre">phonopy</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">generate</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport-plot"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport-plot-transport"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span> <span class="pre">transport</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport-plot-eigenvalues"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span> <span class="pre">eigenvalues</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-transport-plot-selfenergy"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">transport</span> <span class="pre">plot</span> <span class="pre">selfenergy</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-ph-bands"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">ph_bands</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-ph-bands-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">ph_bands</span> <span class="pre">generate</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-ph-bands-plot"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">ph_bands</span> <span class="pre">plot</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phono3py"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phono3py</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phono3py-init"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phono3py</span> <span class="pre">init</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phono3py-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phono3py</span> <span class="pre">generate</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phonopy"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phonopy</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phonopy-init"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phonopy</span> <span class="pre">init</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velph-phonopy-generate"><code class="docutils literal notranslate"><span class="pre">velph</span> <span class="pre">phonopy</span> <span class="pre">generate</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Atsushi Togo
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, Atsushi Togo.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>